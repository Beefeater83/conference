
{% extends 'layout.html.twig' %}

{% block title %}{{ 'button.contacts'|trans }}{% endblock %}

{% block styles %}
    <link rel="stylesheet" href="{{ asset('css/style_contacts.css') }}?v={{ "now"|date("U") }}">
{% endblock %}

{% block content %}

    <div class="contacts-top">
        <div class="line-menu">
            <div class="btn-wrapper">
                <a href="{{ path('participants', {'_locale': app.request.locale}) }}" class="btn">
                    PARTICIPANTS LIST
                </a>
            </div>
            <div class="btn-wrapper">
                <a href="{{ path('main_page', {'_locale': app.request.locale}) }}" class="btn">
                    {{ 'button.main_page'|trans }}
                </a>
            </div>
            <div class="btn-wrapper">
                <a href="{{ path('about_conference', {'_locale': app.request.locale}) }}" class="btn">
                    {{ 'button.about'|trans }}
                </a>
            </div>
            <div class="btn-wrapper">
                <a href="{{ path('program', {'_locale': app.request.locale}) }}" class="btn">
                    {{ 'button.program'|trans }}
                </a>
            </div>
            <div class="btn-wrapper">
                <a href="{{ path('speakers', {'_locale': app.request.locale}) }}" class="btn">
                    {{ 'button.speaker'|trans }}
                </a>
            </div>
            <div class="btn-wrapper">
                <a href="{{ path('partners') }}" class="btn">
                    {{ 'button.partner'|trans }}
                </a>
            </div>

            <div class="btn-wrapper">
                <a href="{{ path('participation', {'_locale': app.request.locale}) }}" class="btn">
                    {{ 'button.participation'|trans }}
                </a>
            </div>
            <div class="btn-wrapper">
                <a href="{{ path('hotel', {'_locale': app.request.locale}) }}" class="btn">
                    {{ 'button.hotel'|trans }}
                </a>
            </div>
        </div>

        <div class="main-wrapper">

            <div class="contacts-block-wrapper">
                <div class="logo">
                    <img src="{{ asset('logo/asia.svg') }}" alt="asia">
                </div>
                <div class="devider"></div>
                <div class="contacts-name">Polina Kalaida</div>
                <div class="contacts">+7 747 110 57 27 (Kazakhstan)</div>
                <div class="contacts">+38 097 333 97 29 (Ukraine)</div>
                <div class="contacts">global@apk-inform.com</div>

                <div class="contacts-name">Elena Cherednichenko</div>
                <div class="contacts">+7 705 268 75 10 (Kazakhstan)</div>
                <div class="contacts">+38 067 634 26 20 (Ukraine)</div>
                <div class="contacts">chief_editor@apk-inform.com</div>
            </div>
            <div class="contacts-block-wrapper">
                <div class="logo logo-soybean" onclick="window.open('https://ukraine-pulse.org', '_blank')">
                    <img src="{{ asset('logo/soybean.svg') }}" alt="soybean">
                </div>
                <div class="devider"></div>
                <div class="contacts-descr">For English speaking participants:</div>
                <div class="contacts-name">Alina Zrazhevska</div>
                <div class="contacts">+38 095 301 83 61 (available via Viber, WhatsApp, Telegram)</div>
                <div class="contacts">conference.pulses@gmail.com</div>

                <div class="contacts-descr contacts-descr-second">For Ukrainian speaking participants:</div>
                <div class="contacts-name">Dmytro Orel</div>
                <div class="contacts">+38 063 150 20 11</div>
                <div class="contacts">agrosecurity@ukr.net</div>
            </div>
            <div class="contacts-block-wrapper">
                <div class="logo apk-logo logo-apk" onclick="window.open('https://www.apk-inform.com/uk', '_blank')">
                    <img src="{{ asset('logo/apk.svg') }}" alt="apk">
                </div>
                <div class="devider"></div>
                <div class="contacts">+380 562 320795</div>
                <div class="contacts">+380 562 320795 (ext.111)</div>
                <div class="contacts">+38 067 634 26 30</div>
                <div class="contacts">market@apk-inform.com</div>
            </div>
            <div class="registration-wrapper">
                <div class="conf-logo">
                    <img src="{{ asset('logo/agrofoodnocircle.svg') }}" alt="agrofood">
                </div>
                <div class="month">{{ 'event.november'|trans }} 5-6-7, 2025</div>
                <div class="turkey">{{ 'event.mersin'|trans }}, {{ 'event.turkey'|trans }}</div>
                <div class="registration">
                    <div class="reg-btn-wrapper">
                        <a href="{{ path('registration', {'_locale': app.request.locale}) }}">
                            <button class="btn-a reg-btn" type="button">{{ 'event.registration'|trans }} >></button>
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="contacts-bottom">
        <div class="bg-layer" id="cLayer1"></div>
        <div class="bg-layer hidden" id="cLayer2"></div>
    </div>

{% endblock %}

{% block scripts %}

    <script>
        const images = [
            '/mersin_images/mersin1.jpg',
            '/mersin_images/mersin2.jpg',
            '/mersin_images/mersin3.jpg'
        ];

        let current = 0;
        let visibleLayer = 1;

        function ensureLayers(container, idPrefix) {
            if (!container.querySelector(`#${idPrefix}1`)) {
                const layer1 = document.createElement('div');
                layer1.className = 'bg-layer';
                layer1.id = `${idPrefix}1`;

                const layer2 = document.createElement('div');
                layer2.className = 'bg-layer hidden';
                layer2.id = `${idPrefix}2`;

                container.prepend(layer2);
                container.prepend(layer1);
            }
        }

        function getTargetLayers() {
            if (window.innerWidth <= 800) {
                const top = document.querySelector('.contacts-top');
                ensureLayers(top, 'topLayer');
                return [
                    document.getElementById('topLayer1'),
                    document.getElementById('topLayer2')
                ];
            } else {
                const bottom = document.querySelector('.contacts-bottom');
                ensureLayers(bottom, 'bottomLayer');
                return [
                    document.getElementById('bottomLayer1'),
                    document.getElementById('bottomLayer2')
                ];
            }
        }

        function initBackground() {
            const [layer1, layer2] = getTargetLayers();
            if (!layer1 || !layer2) return;

            layer1.style.backgroundImage = `url('${images[0]}')`;
            current = 0;
            visibleLayer = 1;
        }

        function changeBackground() {
            const [layer1, layer2] = getTargetLayers();
            if (!layer1 || !layer2) return;

            const next = (current + 1) % images.length;
            const showLayer = visibleLayer === 1 ? layer2 : layer1;
            const hideLayer = visibleLayer === 1 ? layer1 : layer2;

            showLayer.style.backgroundImage = `url('${images[next]}')`;
            hideLayer.classList.add('hidden');
            showLayer.classList.remove('hidden');

            visibleLayer = visibleLayer === 1 ? 2 : 1;
            current = next;
        }

        initBackground();
        setInterval(changeBackground, 4000);
        window.addEventListener('resize', initBackground);
    </script>
{% endblock %}